\hypertarget{namespace_ball_detection}{}\doxysection{Ball\+Detection Namespace Reference}
\label{namespace_ball_detection}\index{BallDetection@{BallDetection}}


This node is responsable for the ball detection.  


\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \mbox{\hyperlink{class_ball_detection_1_1collision}{collision}}
\begin{DoxyCompactList}\small\item\em This class allows obstacle avoidance by using the laser sensor. \end{DoxyCompactList}\item 
class \mbox{\hyperlink{class_ball_detection_1_1image__feature}{image\+\_\+feature}}
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
def \mbox{\hyperlink{namespace_ball_detection_ab81c8ddc2e19ebdc8f2bcc563e6648d5}{Ball\+Detection}} (gray, hsv, ball\+Found)
\begin{DoxyCompactList}\small\item\em Function that recognize any ball in the enviroment by using th {\itshape Open\+CV} function {\ttfamily cv2.\+Hough\+Circles(image, method, dp, min\+Dist)}. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{namespace_ball_detection_abb2e292098c33e9d50e35e637e131a2e}{main}} (args)
\begin{DoxyCompactList}\small\item\em Main program entry, it initializes and cleans up ros node. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
bool \mbox{\hyperlink{namespace_ball_detection_abe04396aeba9fba94fee10950196b7e6}{VERBOSE}} = False
\item 
\mbox{\hyperlink{namespace_ball_detection_ac6211890fac84d0ca54333384ddea862}{laser}} = \mbox{\hyperlink{class_ball_detection_1_1collision}{collision}}()
\begin{DoxyCompactList}\small\item\em Initiliazation class Color\+Labeler. \end{DoxyCompactList}\item 
\mbox{\hyperlink{namespace_ball_detection_a7ffe5ee300fe61c300fe7141981012f9}{cl}} = \mbox{\hyperlink{classcolor_labeler_1_1_color_labeler}{Color\+Labeler}}()
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
This node is responsable for the ball detection. 

There are two main phases\+:


\begin{DoxyItemize}
\item {\bfseries{pre-\/processing}}\+: Due to the module {\itshape \mbox{\hyperlink{namespacecolor_labeler}{color\+Labeler}}} the robot is able to detect any ball in the enviroment and recognize its color. Once the ball is detected, the afromentioned module also returns the features for the specific color in order to procede with the tracking
\item {\bfseries{tracking}}\+: It implemnts a simple algorith in order to track the ball untill the ball is reached, then publishes on the topic {\bfseries{cmd\+\_\+vel}} in order to reach the ball position.
\end{DoxyItemize}

It also publishes on the topic {\bfseries{Ball\+State}} in order to communicate with the \mbox{\hyperlink{namespacecmd__man}{cmd\+\_\+man}} whenever the ball is detected and the robot is next to it. By subscribing on the topic {\bfseries{current\+State}}, the robot avoids the tracking when the robot is in the sleep state. Also it remembers which ball has been already detected so, even in this case, it avoids the tracking. 

\doxysubsection{Function Documentation}
\mbox{\Hypertarget{namespace_ball_detection_ab81c8ddc2e19ebdc8f2bcc563e6648d5}\label{namespace_ball_detection_ab81c8ddc2e19ebdc8f2bcc563e6648d5}} 
\index{BallDetection@{BallDetection}!BallDetection@{BallDetection}}
\index{BallDetection@{BallDetection}!BallDetection@{BallDetection}}
\doxysubsubsection{\texorpdfstring{BallDetection()}{BallDetection()}}
{\footnotesize\ttfamily def Ball\+Detection.\+Ball\+Detection (\begin{DoxyParamCaption}\item[{}]{gray,  }\item[{}]{hsv,  }\item[{}]{ball\+Found }\end{DoxyParamCaption})}



Function that recognize any ball in the enviroment by using th {\itshape Open\+CV} function {\ttfamily cv2.\+Hough\+Circles(image, method, dp, min\+Dist)}. 

Once the ball has been detected it calls the module color\+Labelr and its method generate\+Boundaries in order to return the required features.


\begin{DoxyParams}{Parameters}
{\em gray} & image in grayscale \\
\hline
{\em hsv} & image in hsv colorspace \\
\hline
{\em ball\+Found} & {\ttfamily Bool}, It represents if the ball has been found or not\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
lower\+Bounds\+: {\ttfamily np.\+array}, lower mask of the color detected 

upper\+Bound\+: {\ttfamily np.\+array}, upper mask of the color detected 

ball\+Found\+: {\ttfamily Bool}, it indicate wheter the ball is dected or not 

color\+: {\ttfamily String}, it represents the color of the ball detected 
\end{DoxyReturn}
\mbox{\Hypertarget{namespace_ball_detection_abb2e292098c33e9d50e35e637e131a2e}\label{namespace_ball_detection_abb2e292098c33e9d50e35e637e131a2e}} 
\index{BallDetection@{BallDetection}!main@{main}}
\index{main@{main}!BallDetection@{BallDetection}}
\doxysubsubsection{\texorpdfstring{main()}{main()}}
{\footnotesize\ttfamily def Ball\+Detection.\+main (\begin{DoxyParamCaption}\item[{}]{args }\end{DoxyParamCaption})}



Main program entry, it initializes and cleans up ros node. 



\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{namespace_ball_detection_a7ffe5ee300fe61c300fe7141981012f9}\label{namespace_ball_detection_a7ffe5ee300fe61c300fe7141981012f9}} 
\index{BallDetection@{BallDetection}!cl@{cl}}
\index{cl@{cl}!BallDetection@{BallDetection}}
\doxysubsubsection{\texorpdfstring{cl}{cl}}
{\footnotesize\ttfamily Ball\+Detection.\+cl = \mbox{\hyperlink{classcolor_labeler_1_1_color_labeler}{Color\+Labeler}}()}

\mbox{\Hypertarget{namespace_ball_detection_ac6211890fac84d0ca54333384ddea862}\label{namespace_ball_detection_ac6211890fac84d0ca54333384ddea862}} 
\index{BallDetection@{BallDetection}!laser@{laser}}
\index{laser@{laser}!BallDetection@{BallDetection}}
\doxysubsubsection{\texorpdfstring{laser}{laser}}
{\footnotesize\ttfamily Ball\+Detection.\+laser = \mbox{\hyperlink{class_ball_detection_1_1collision}{collision}}()}



Initiliazation class Color\+Labeler. 

\mbox{\Hypertarget{namespace_ball_detection_abe04396aeba9fba94fee10950196b7e6}\label{namespace_ball_detection_abe04396aeba9fba94fee10950196b7e6}} 
\index{BallDetection@{BallDetection}!VERBOSE@{VERBOSE}}
\index{VERBOSE@{VERBOSE}!BallDetection@{BallDetection}}
\doxysubsubsection{\texorpdfstring{VERBOSE}{VERBOSE}}
{\footnotesize\ttfamily bool Ball\+Detection.\+VERBOSE = False}

